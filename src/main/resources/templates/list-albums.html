<!-- <div xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
    <a th:if="${session.user != null}" class="btn btn-primary"  href="/albums/create">Add new album</a>
    <br>
    <form th:method="post" action="/albums/search">
        <label for="search">Search album by name:</label>

        <input th:name="albumId" list="search" id="answerInput">
        <datalist id="search" >
            <option th:each="album : ${albumList}" th:text="${album.getAlbumName()}" th:value="${album.getAlbumId()}">
            </option>
        </datalist>
        <input type="hidden" name="answer" id="answerInput-hidden">

        <button type="submit">Search</button>
    </form>



    <span th:each="album : ${albumList}">
        <a th:href="@{'/albums/{id}' (id=${album.getAlbumId()})}">
            <th:block th:text="${album.getAlbumName()}"/></a>
        <br>
    </span>

</div> -->


<head xmlns:th="http://www.thymeleaf.org" >
    <title>TuneTalk</title>
    <link rel="stylesheet" th:href="@{styles/base.css}">
    <link rel="stylesheet" th:href="@{styles/elements.css}">

    <link rel="stylesheet" th:href="@{styles/list-content.css}">

<!--    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>-->
    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>

    <script>

        $(document).ready(function (){

            findSelectedPeriod();
            findSelectedGenre();

            document.getElementById("albumSearch").value = '[[${albumSearch}]]'

            function findSelectedPeriod(){
                var selectedPeriod = '[[${selectedPeriod}]]' || null;
                $("#period option").each(function (){
                    if(selectedPeriod === this.value){
                        $(this).attr("selected",true)
                    }
                })
            }

            function findSelectedGenre(){
                var selectedGenreId = '[[${selectedGenreId}]]' || null;
                $("#genreId option").each(function (){
                    if(selectedGenreId === this.value){
                        $(this).attr("selected",true)
                    }
                })
            }

            function callAlbumSearch(){
                var genreId = document.getElementById("genreId").value
                var albumSearch = document.getElementById("albumSearch").value
                var period = document.getElementById("period").value
                window.location = '/albums?albumSearch='+albumSearch+'&period='+period+'&genreId='+genreId
            }

            $('#genreId').change(callAlbumSearch);
            $('#period').change(callAlbumSearch);
            // $('#albumSearch').keypress(callAlbumSearch);

        })

    </script>



</head>

<body xmlns:th="http://www.w3.org/1999/xhtml">
    <form th:method="get" th:action="@{/albums}">
        <div class="title-container">
            <h4>All albums</h4>
            <div class="spacer-title"></div>
            <div class="search-container">
                <input th:name="albumSearch" placeholder="Search album" id="albumSearch" type="text">
                <button type="submit">
                    <img th:src="@{icons/search.svg}">
                </button>

            </div>
        </div>
        <div class="filters-container">
            <div class="filter-picker">
                <select>
                    <option value="">Last updated</option>
                    <option>Top</option>
                    <option>Least popular</option>
                </select>
            </div>
            <div class="filter-picker">
                <form method="get" action="/albums">
                    <select name="period" id="period">
                        <option value="">All year periods</option>
                        <option value="2020">2020s</option>
                        <option value="2010">2010s</option>
                        <option value="2000">2000s</option>
                        <option value="1990">1990s</option>
                        <option value="1980">1980s</option>
                        <option value="1970">1970s</option>
                        <option value="1960">1960s</option>
                        <option value="1950">1950s</option>
                        <option value="1940">1940s</option>
                    </select>
                </form>

            </div>
            <div class="filter-picker">
                <select name="genreId" id="genreId">
                    <option value="">All genres</option>
                    <option th:each="genre : ${genres}" th:text="${genre.genreName}" th:value="${genre.genreId}"></option>
                </select>
            </div>
            <a href="/albums/create">
                <!-- <a th:if="${session.user != null}" href="/albums/create"> -->
                <div class="add-new-button">
                    <p>Add Album</p>
                    <img th:src="@{icons/add.svg}">
                </div>
            </a>


        </div>
    </form>

    <div class="content-container">
        <p class="empty-container-center" th:if="${#lists.isEmpty(albumList)}">No Results</p>
        <a th:each="album : ${albumList}" th:href="@{/albums/{id} (id=${album.getAlbumId()})}">
            <div class="album-item">
                <img th:src="${album.albumImage}">
                <div class="content">
                    <p><b th:text="${album.getAlbumName()}"></b></p>
                    <p th:text="${'Released: ' + album.getDateReleased().getYear()}"></p>
                    <br>
                    <p>0 comments</p>
                </div>
            </div>
        </a>
    </div>
</body>